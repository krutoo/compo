{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/library/js/index.js","webpack:///./src/library/js/utils.js","webpack:///./src/library/js/render.js","webpack:///./src/library/js/pack.js","webpack:///./src/demo/js/components/Filters.js","webpack:///./src/demo/js/components/Footer.js","webpack:///./src/demo/js/components/Note.js","webpack:///./src/demo/js/components/Field.js","webpack:///./src/demo/js/components/App.js","webpack:///./src/demo/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pack","render","classOf","toString","slice","_utils","templates","Map","anchorsRegex","_ref","rootElement","needKeepContent","htmlString","valuesMap","isPack","arguments","TypeError","template","getTemplate","replaceAnchors","node","Element","hasChildNodes","concat","_toConsumableArray","childNodes","forEach","test","nodeValue","templateString","replace","match","childNode","parentNode","insertBefore","remove","processNode","child","element","attributes","_ref2","trim","targetValue","setAttribute","removeAttribute","addEventListener","innerHTML","SyntaxError","processAttributes","Comment","commentNode","newElement","createTemplate","String","replaceWith","firstChild","item","processComment","children","length","RangeError","insertAdjacentElement","has","set","cloneNode","asText","templateElement","document","createElement","insertAdjacentText","insertAdjacentHTML","content","hasTemplate","hasMap","getAnchor","keys","strings","parts","_len","values","Array","_key","index","push","anchor","join","freeze","filters","selectFilter","currentFilter","_templateObject","map","filter","isActive","_templateObject2","_packmar","noteText","isCompleted","onRemove","onCheck","textClasses","formattedText","split","part","_templateObject3","placeholder","onInput","options","title","currentText","currentFilterName","notes","typeNote","addNote","checkNote","removeNote","find","needShowNote","check","_Field2","default","_Filters2","note","_Note2","text","checked","id","_Footer2","FILTERS","DEFAULT_STATE","pressedKeys","state","onKeyDown","isPrintable","isKeysCombination","focusOnField","onKeyUp","saveToLocalStorage","localStorage","setItem","JSON","stringify","_ref3","target","unshift","Date","now","renderApp","field","querySelector","focus","noteId","targetNote","filterName","app","_App2","body","window","initialState","parse","getItem"],"mappings":"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","file":"js/demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import pack from './pack';\r\nimport render from './render';\r\n\r\nexport { pack, render };\r\n","/**\r\n * Return a class name of input value (true way to get it).\r\n * @param {*} value Value to define it class.\r\n * @return {string} Name of class.\r\n */\r\nexport const classOf = value => Object.prototype.toString.call(value).slice(8, -1);\r\n","import { classOf } from './utils';\r\n\r\nconst templates = new Map();\r\nconst anchorsRegex = /{%\\d*%}/g;\r\n\r\n/**\r\n * Render packed element.\r\n * @param {Object} pack Packed element.\r\n * @param {Element} [rootElement] Element to place packed element into.\r\n * @param {boolean} [needKeepContent] Need keep root element content?.\r\n * @return {Element} unpacked element, normal dom node.\r\n */\r\nexport default function render ({ htmlString, valuesMap }, rootElement, needKeepContent) {\r\n\tif (!isPack(arguments[0])) {\r\n\t\tthrow new TypeError('First argument must be packed element');\r\n\t}\r\n\tconst template = getTemplate(htmlString);\r\n\treplaceAnchors(template);\r\n\tprocessNode(template, valuesMap);\r\n\tif (template.children.length !== 1) {\r\n\t\tthrow new RangeError('Template must contains only one element');\r\n\t}\r\n\tif (rootElement instanceof Element) {\r\n\t\tif (!needKeepContent) {\r\n\t\t\trootElement.innerHTML = '';\r\n\t\t}\r\n\t\tif (template.children.length) {\r\n\t\t\trootElement.insertAdjacentElement('beforeEnd', template.children[0]);\r\n\t\t}\r\n\t}\r\n\treturn template.children[0];\r\n}\r\n\r\n/**\r\n * Returns template element for HTML-string.\r\n * @param {string} htmlString HTML string.\r\n * @return {Element} Template element.\r\n */\r\nfunction getTemplate (htmlString) {\r\n\tlet template;\r\n\tif (templates.has(htmlString)) {\r\n\t\ttemplate = templates.get(htmlString);\r\n\t} else {\r\n\t\ttemplate = createTemplate(htmlString);\r\n\t\ttemplates.set(htmlString, template);\r\n\t}\r\n\treturn template.cloneNode(true);\r\n}\r\n\r\n/**\r\n * Replaces anchors by anchor-comments in element.\r\n * @param {Node} node Node to replace anchors in it.\r\n */\r\nfunction replaceAnchors (node) {\r\n\tif (node instanceof Element) {\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\t[...node.childNodes].forEach(node => replaceAnchors(node));\r\n\t\t}\r\n\t} else if (anchorsRegex.test(node.nodeValue)) {\r\n\t\tconst templateString = node.nodeValue.replace(anchorsRegex, match => `<!--${match}-->`);\r\n\t\tconst template = getTemplate(templateString);\r\n\t\t[...template.childNodes].forEach(childNode => {\r\n\t\t\tnode.parentNode.insertBefore(childNode, node);\r\n\t\t});\r\n\t\tnode.remove();\r\n\t}\r\n}\r\n\r\n/**\r\n * Processes node. Inserts values from map instead of anchor-comments.\r\n * @param {Node} node Node to process.\r\n * @param {Object} valuesMap Values map.\r\n */\r\nfunction processNode (node, valuesMap) {\r\n\tif (node.hasChildNodes()) {\r\n\t\t[...node.childNodes].forEach(child => processNode(child, valuesMap));\r\n\t}\r\n\tif (node instanceof Element) {\r\n\t\tprocessAttributes(node, valuesMap);\r\n\t} else if (node instanceof Comment) {\r\n\t\tprocessComment(node, valuesMap);\r\n\t}\r\n}\r\n\r\n/**\r\n * Processes anchor-comment. Inserts value from map instead of comment.\r\n * @param {Node} commentNode Comment node to process.\r\n * @param {Object} valuesMap Values map.\r\n */\r\nfunction processComment (commentNode, valuesMap) {\r\n\tconst key = commentNode.nodeValue;\r\n\tif (valuesMap.hasOwnProperty(key)) {\r\n\t\tconst value = valuesMap[key];\r\n\t\tswitch (classOf(value)) {\r\n\t\t\tcase 'Boolean':\r\n\t\t\tcase 'Number':\r\n\t\t\tcase 'String': {\r\n\t\t\t\tconst newElement = createTemplate(String(value), true);\r\n\t\t\t\tcommentNode.replaceWith(newElement.firstChild);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 'Array': {\r\n\t\t\t\tvalue.forEach(item => {\r\n\t\t\t\t\tif (isPack(item)) {\r\n\t\t\t\t\t\tcommentNode.parentNode.insertBefore(render(item), commentNode);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new TypeError('Only the packed elements can be in the arrays');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tif (isPack(value)) {\r\n\t\t\t\t\tcommentNode.parentNode.insertBefore(render(value), commentNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcommentNode.remove();\r\n\t}\r\n}\r\n\r\n/**\r\n * Processes attributes of element. Inserts value from map instead of anchors.\r\n * @param {Element} element Element for processing its attributes.\r\n * @param {Object} valuesMap Values map.\r\n */\r\nfunction processAttributes (element, valuesMap) {\r\n\t[...element.attributes].forEach(({ name, value }) => {\r\n\t\tif (valuesMap.hasOwnProperty(value.trim())) {\r\n\t\t\telement.valuesMap = element.valuesMap || {};\r\n\t\t\tconst targetValue = valuesMap[value.trim()];\r\n\t\t\tswitch (classOf(targetValue)) {\r\n\t\t\t\tcase 'Number':\r\n\t\t\t\tcase 'String': {\r\n\t\t\t\t\telement.setAttribute(name, targetValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'Boolean': {\r\n\t\t\t\t\tif (targetValue) {\r\n\t\t\t\t\t\telement.setAttribute(name, '');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'Function': {\r\n\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\telement.addEventListener(name, targetValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tif (isPack(targetValue)) {\r\n\t\t\t\t\t\telement.setAttribute(name, render(targetValue).innerHTML);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (valuesMap.hasOwnProperty(name.trim())) {\r\n\t\t\tconst targetValue = valuesMap[name.trim()];\r\n\t\t\telement.removeAttribute(name);\r\n\t\t\telement.setAttribute(targetValue, true);\r\n\t\t} else if (value.match(anchorsRegex)) {\r\n\t\t\tthrow new SyntaxError(`In \"${name}\" attribute: only one string or one expression must be in value`);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Returns new DIV element with content from HTML string.\r\n * @param {string} htmlString HTML string.\r\n * @param {boolean} asText Need parse string as simple text?\r\n * @return {Element} New DIV element.\r\n */\r\nfunction createTemplate (htmlString, asText) {\r\n\tconst template = String(htmlString || '').trim();\r\n\tconst templateElement = document.createElement('div');\r\n\tif (asText) {\r\n\t\ttemplateElement.insertAdjacentText('afterBegin', template);\r\n\t} else {\r\n\t\ttemplateElement.insertAdjacentHTML('afterBegin', template);\r\n\t}\r\n\treturn templateElement;\r\n}\r\n\r\n/**\r\n * Verifies that value is a markup package.\r\n * @param {*} value Checked value.\r\n * @return {boolean} Value is a valid package?\r\n */\r\nfunction isPack (value) {\r\n\tconst content = { ...value };\r\n\tconst hasTemplate = classOf(content.htmlString) === 'String';\r\n\tconst hasMap = classOf(content.valuesMap) === 'Object';\r\n\treturn hasTemplate && hasMap;\r\n}\r\n","/**\r\n * Tag for template literals. Returns the packed element.\r\n * @param {Array} strings String part of template literal.\r\n * @param {...*} values Values part.\r\n * @return {Object} Packed element.\r\n */\r\nexport default function pack (strings, ...values) {\r\n\tconst parts = [];\r\n\tconst valuesMap = {};\r\n\tfor (let index = 0; index < strings.length; index++) {\r\n\t\tparts.push(strings[index]);\r\n\t\tif (values.hasOwnProperty(index)) {\r\n\t\t\tconst anchor = getAnchor(valuesMap);\r\n\t\t\tvaluesMap[anchor] = values[index];\r\n\t\t\tparts.push(anchor);\r\n\t\t}\r\n\t}\r\n\tconst htmlString = parts.join('').trim();\r\n\treturn Object.freeze({ htmlString, valuesMap });\r\n}\r\n\r\n/**\r\n * Returns anchor.\r\n * @param {Object} valuesMap Values map.\r\n * @return {string} Anchor for template.\r\n */\r\nfunction getAnchor (valuesMap) {\r\n\tconst length = Object.keys(valuesMap).length;\r\n\treturn `{%${length}%}`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Filters ({ filters, selectFilter, currentFilter }) {\r\n\treturn pack`\r\n\t\t<div class=\"filters display_flex\">\r\n\t\t\t${filters.map(filter => {\r\n\t\t\t\tconst isActive = filter.name === currentFilter.name;\r\n\t\t\t\treturn pack`\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=${`filter-button ${isActive ? 'active' : ''}`}\r\n\t\t\t\t\t\tclick=${() => selectFilter(filter.name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t${filter.name}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t`;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Footer () {\r\n\treturn pack`\r\n\t\t<footer class=\"main-footer\">\r\n\t\t\tThis SPA is <b>packmar</b> library work demo.\r\n\t\t\tCheck it on <a href=\"https://github.com/krutoo/packmar.js\" target=\"_blank\">GitHub</a>.\r\n\t\t</footer>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Note ({ noteText, isCompleted, onRemove, onCheck }) {\r\n\tconst textClasses = `text ${isCompleted ? 'text-decoration_line-through' : ''}`;\r\n\tconst formattedText = pack`\r\n\t\t<div class=\"formatted\">\r\n\t\t\t${noteText.split('\\n').map(part => pack`<span>${part}<br /></span>`)}\r\n\t\t</div>\r\n\t`;\r\n\treturn pack`\r\n\t\t<div class=\"note overflow_hidden\">\r\n\t\t\t<button class=\"button check-button overflow_hidden\" click=\"${onCheck}\">\r\n\t\t\t\t${isCompleted ? '✔️' : ''}\r\n\t\t\t</button>\r\n\t\t\t<div class=${textClasses}>\r\n\t\t\t\t${formattedText}\r\n\t\t\t</div>\r\n\t\t\t<button class=\"button remove-button overflow_hidden\" click=${onRemove}>\r\n\t\t\t\t❌\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Field ({ value, placeholder, onInput }) {\r\n\treturn pack`\r\n\t\t<textarea\r\n\t\t\trows=\"5\"\r\n\t\t\tclass=\"main-field display_block width_100percent\"\r\n\t\t\tplaceholder=${placeholder}\r\n\t\t\tinput=${onInput}\r\n\t\t>${value}</textarea>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\nimport Field from './Field';\r\nimport Note from './Note';\r\nimport Footer from './Footer';\r\nimport Filters from './Filters';\r\n\r\nexport default function App (options) {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tcurrentText,\r\n\t\tcurrentFilterName,\r\n\t\tnotes,\r\n\t\tfilters,\r\n\t\ttypeNote,\r\n\t\taddNote,\r\n\t\tcheckNote,\r\n\t\tremoveNote,\r\n\t\tselectFilter,\r\n\t} = options;\r\n\tconst defaultCheck = () => true;\r\n\tconst currentFilter = filters.find(filter => filter.name === currentFilterName) || {};\r\n\tconst needShowNote = currentFilter.check || defaultCheck;\r\n\treturn pack`\r\n\t\t<div class=\"app-wrapper display_flex width_100percent\">\r\n\t\t\t<div class=\"main-content\">\r\n\t\t\t\t<h1 class=\"main-title\">${title}</h1>\r\n\t\t\t\t${Field({\r\n\t\t\t\t\tplaceholder: 'Just start typing...',\r\n\t\t\t\t\tvalue: currentText,\r\n\t\t\t\t\tonInput: typeNote,\r\n\t\t\t\t})}\r\n\t\t\t\t<button class=\"width_100percent create-note-button\" click=${addNote}>To Do</button>\r\n\t\t\t\t${notes.length\r\n\t\t\t\t\t? Filters({\r\n\t\t\t\t\t\tfilters,\r\n\t\t\t\t\t\tselectFilter,\r\n\t\t\t\t\t\tcurrentFilter,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: ''\r\n\t\t\t\t}\r\n\t\t\t\t<div class=\"notes-list\">\r\n\t\t\t\t\t${notes.filter(needShowNote).map(note => Note({\r\n\t\t\t\t\t\tnoteText: note.text,\r\n\t\t\t\t\t\tisCompleted: note.checked,\r\n\t\t\t\t\t\tonCheck: () => checkNote(note.id),\r\n\t\t\t\t\t\tonRemove: () => removeNote(note.id),\r\n\t\t\t\t\t}))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t${Footer()}\r\n\t\t</div>\r\n\t`;\r\n}\r\n","import { render } from 'packmar';\r\nimport App from './components/App';\r\n\r\nconst FILTERS = Object.freeze([\r\n\t{ name: 'All', check: () => true },\r\n\t{ name: 'Active', check: note => !note.checked },\r\n\t{ name: 'Completed', check: note => note.checked },\r\n]);\r\n\r\nconst DEFAULT_STATE = Object.freeze({\r\n\tcurrentFilterName: FILTERS[0].name,\r\n\tcurrentText: '',\r\n\tnotes: [\r\n\t\t{ id: 1, text: 'Check the packmar.js demo', checked: true },\r\n\t\t{ id: 2, text: 'Create new note', checked: false },\r\n\t\t{ id: 3, text: 'mark any note as done ', checked: false },\r\n\t\t{ id: 4, text: 'Delete any note', checked: false },\r\n\t],\r\n});\r\n\r\nconst pressedKeys = {};\r\n\r\nlet state;\r\n\r\nwindow.addEventListener('DOMContentLoaded', initialize);\r\n\r\nfunction initialize () {\r\n\tconst initialState = JSON.parse(localStorage.getItem('state'));\r\n\tstate = { ...DEFAULT_STATE, ...initialState };\r\n\trenderApp();\r\n\tfocusOnField();\r\n\twindow.addEventListener('beforeunload', saveToLocalStorage);\r\n\twindow.addEventListener('keydown', onKeyDown);\r\n\twindow.addEventListener('keyup', onKeyUp);\r\n}\r\n\r\nfunction onKeyDown ({ key }) {\r\n\tpressedKeys[key] = true;\r\n\tconst isPrintable = key.length === 1;\r\n\tconst isKeysCombination = Object.keys(pressedKeys).length > 1;\r\n\tif (isPrintable && !isKeysCombination) {\r\n\t\tfocusOnField();\r\n\t}\r\n}\r\n\r\nfunction onKeyUp ({ key }) {\r\n\tdelete pressedKeys[key];\r\n}\r\n\r\nfunction saveToLocalStorage () {\r\n\tlocalStorage.setItem('state', JSON.stringify(state));\r\n}\r\n\r\nfunction typeNote ({ target }) {\r\n\tstate.currentText = target.value;\r\n}\r\n\r\nfunction addNote () {\r\n\tconst hasText = state.currentText.replace(/\\s*/g, '').length;\r\n\tif (hasText) {\r\n\t\tstate.notes.unshift({\r\n\t\t\tid: Date.now(),\r\n\t\t\ttext: state.currentText.trim(),\r\n\t\t\tchecked: false,\r\n\t\t});\r\n\t\tstate.currentText = '';\r\n\t\trenderApp();\r\n\t} else {\r\n\t\tfocusOnField();\r\n\t}\r\n}\r\n\r\nfunction focusOnField () {\r\n\tconst field = document.querySelector('.main-field');\r\n\tif (field) {\r\n\t\tfield.focus();\r\n\t}\r\n}\r\n\r\nfunction checkNote (noteId) {\r\n\tconst targetNote = state.notes.find(note => note.id === noteId);\r\n\ttargetNote.checked = !targetNote.checked;\r\n\trenderApp();\r\n}\r\n\r\nfunction removeNote (noteId) {\r\n\tstate.notes = state.notes.filter(note => note.id !== noteId);\r\n\tif (state.notes.length === 0) {\r\n\t\tselectFilter(FILTERS[0].name);\r\n\t} else {\r\n\t\trenderApp();\r\n\t}\r\n}\r\n\r\nfunction selectFilter (filterName) {\r\n\tstate.currentFilterName = filterName;\r\n\trenderApp();\r\n}\r\n\r\nfunction renderApp () {\r\n\tconst app = App({\r\n\t\ttitle: '📝 To Do App',\r\n\t\tcurrentText: state.currentText,\r\n\t\tcurrentFilterName: state.currentFilterName,\r\n\t\tnotes: state.notes,\r\n\t\tfilters: FILTERS,\r\n\t\ttypeNote,\r\n\t\taddNote,\r\n\t\tcheckNote,\r\n\t\tremoveNote,\r\n\t\tselectFilter,\r\n\t});\r\n\trender(app, document.body);\r\n}\r\n"],"sourceRoot":""}