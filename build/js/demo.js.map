{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/library/js/index.js","webpack:///./src/demo/js/components/Filters.js","webpack:///./src/demo/js/components/Footer.js","webpack:///./src/demo/js/components/Note.js","webpack:///./src/demo/js/components/Field.js","webpack:///./src/demo/js/components/App.js","webpack:///./src/library/js/utils.js","webpack:///./src/library/js/renderer.js","webpack:///./src/library/js/templator.js","webpack:///./src/demo/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","templator","renderer","pack","render","_ref","filters","selectFilter","currentFilter","_templateObject","map","filter","isActive","_templateObject2","_packmar","noteText","isCompleted","onRemove","onCheck","textClasses","formattedText","split","part","_templateObject3","placeholder","onInput","options","title","currentText","currentFilterName","notes","typeNote","addNote","checkNote","removeNote","find","needShowNote","check","_Field2","default","Boolean","length","_Filters2","note","_Note2","text","checked","id","_Footer2","classOf","toString","slice","_utils","templates","Map","anchorsRegex","rootElement","needKeepContent","htmlString","valuesMap","isPack","arguments","TypeError","template","getTemplate","replaceAnchors","node","Element","hasChildNodes","concat","_toConsumableArray","childNodes","forEach","test","nodeValue","templateString","replace","match","childNode","parentNode","insertBefore","remove","processNode","child","element","attributes","_ref2","trim","targetValue","setAttribute","removeAttribute","addEventListener","innerHTML","SyntaxError","processAttributes","Comment","commentNode","newElement","createTemplate","String","replaceWith","firstChild","item","processComment","children","RangeError","insertAdjacentElement","has","set","cloneNode","asText","templateElement","document","createElement","insertAdjacentText","insertAdjacentHTML","hasTemplate","hasMap","getAnchor","anchor","keys","strings","parts","_len","values","Array","_key","push","join","FILTERS","pressedKeys","state","onKeyDown","isPrintable","isKeysCombination","focusOnField","onKeyUp","saveToLocalStorage","localStorage","setItem","JSON","stringify","_ref3","target","unshift","Math","random","renderApp","field","querySelector","focus","noteId","targetNote","filterName","app","_App2","body","window","initialState","parse","getItem"],"mappings":"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","file":"js/demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import * as templator from './templator';\r\nimport * as renderer from './renderer';\r\n\r\nexport const pack = templator.pack;\r\nexport const render = renderer.render;\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Filters ({ filters, selectFilter, currentFilter }) {\r\n\treturn pack`\r\n\t\t<div class=\"filters display_flex\">\r\n\t\t\t${filters.map(filter => {\r\n\t\t\t\tconst isActive = filter.name === currentFilter.name;\r\n\t\t\t\treturn pack`\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=${`filter-button ${isActive ? 'active' : ''}`}\r\n\t\t\t\t\t\tclick=${() => selectFilter(filter.name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t${filter.name}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t`;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Footer () {\r\n\treturn pack`\r\n\t\t<footer class=\"main-footer\">\r\n\t\t\tThis SPA is <b>packmar</b> library work demo.\r\n\t\t\tCheck it on <a href=\"https://github.com/krutoo/compo\" target=\"_blank\">GitHub</a>.\r\n\t\t</footer>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Note ({ noteText, isCompleted, onRemove, onCheck }) {\r\n\tconst textClasses = `text ${isCompleted ? 'text-decoration_line-through' : ''}`;\r\n\tconst formattedText = pack`\r\n\t\t<div class=\"formatted\">\r\n\t\t\t${noteText.split('\\n').map(part => pack`<span>${part}<br /></span>`)}\r\n\t\t</div>\r\n\t`;\r\n\treturn pack`\r\n\t\t<div class=\"note overflow_hidden\">\r\n\t\t\t<button class=\"button check-button overflow_hidden\" click=\"${onCheck}\">\r\n\t\t\t\t${isCompleted ? '✔️' : ''}\r\n\t\t\t</button>\r\n\t\t\t<div class=${textClasses}>\r\n\t\t\t\t${formattedText}\r\n\t\t\t</div>\r\n\t\t\t<button class=\"button remove-button overflow_hidden\" click=${onRemove}>\r\n\t\t\t\t❌\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\n\r\nexport default function Field ({ value, placeholder, onInput }) {\r\n\treturn pack`\r\n\t\t<textarea\r\n\t\t\trows=\"5\"\r\n\t\t\tclass=\"main-field display_block width_100percent\"\r\n\t\t\tplaceholder=${placeholder}\r\n\t\t\tinput=${onInput}\r\n\t\t>${value}</textarea>\r\n\t`;\r\n}\r\n","import { pack } from 'packmar';\r\nimport Field from './Field';\r\nimport Note from './Note';\r\nimport Footer from './Footer';\r\nimport Filters from './Filters';\r\n\r\nexport default function App (options) {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tcurrentText,\r\n\t\tcurrentFilterName,\r\n\t\tnotes,\r\n\t\tfilters,\r\n\t\ttypeNote,\r\n\t\taddNote,\r\n\t\tcheckNote,\r\n\t\tremoveNote,\r\n\t\tselectFilter,\r\n\t} = options;\r\n\tconst defaultCheck = () => true;\r\n\tconst currentFilter = filters.find(filter => filter.name === currentFilterName) || {};\r\n\tconst needShowNote = currentFilter.check || defaultCheck;\r\n\treturn pack`\r\n\t\t<div class=\"app-wrapper display_flex width_100percent\">\r\n\t\t\t<div class=\"main-content\">\r\n\t\t\t\t<h1 class=\"main-title\">${title}</h1>\r\n\t\t\t\t${Field({\r\n\t\t\t\t\tplaceholder: 'Just start typing...',\r\n\t\t\t\t\tvalue: currentText,\r\n\t\t\t\t\tonInput: typeNote,\r\n\t\t\t\t})}\r\n\t\t\t\t<button class=\"width_100percent\" click=${addNote}>To Do</button>\r\n\t\t\t\t${Boolean(notes.length)\r\n\t\t\t\t\t? Filters({\r\n\t\t\t\t\t\tfilters,\r\n\t\t\t\t\t\tselectFilter,\r\n\t\t\t\t\t\tcurrentFilter,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: ''\r\n\t\t\t\t}\r\n\t\t\t\t<div class=\"notes-list\">\r\n\t\t\t\t\t${notes.filter(needShowNote).map(note => Note({\r\n\t\t\t\t\t\tnoteText: note.text,\r\n\t\t\t\t\t\tisCompleted: note.checked,\r\n\t\t\t\t\t\tonCheck: () => checkNote(note.id),\r\n\t\t\t\t\t\tonRemove: () => removeNote(note.id),\r\n\t\t\t\t\t}))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t${Footer()}\r\n\t\t</div>\r\n\t`;\r\n}\r\n","/**\r\n * Return a class name of input value (true way to get it).\r\n * @param {*} value Value to define it class.\r\n * @return {string} Name of class.\r\n */\r\nexport const classOf = value => Object.prototype.toString.call(value).slice(8, -1);\r\n","import { classOf } from './utils';\r\n\r\nconst templates = new Map();\r\nconst anchorsRegex = /{%\\d*%}/g;\r\n\r\n/**\r\n * Render packed element.\r\n * @param {Object} pack Packed element.\r\n * @param {Element} [rootElement] Element to place packed element into.\r\n * @param {boolean} [needKeepContent] Need keep root element content?.\r\n * @return {Element} unpacked element, normal dom node.\r\n */\r\nexport function render ({ htmlString, valuesMap }, rootElement, needKeepContent) {\r\n\tif (!isPack(arguments[0])) {\r\n\t\tthrow new TypeError('First argument must be packed element');\r\n\t}\r\n\tconst template = getTemplate(htmlString);\r\n\treplaceAnchors(template);\r\n\tprocessNode(template, valuesMap);\r\n\tif (template.children.length !== 1) {\r\n\t\tthrow new RangeError('Template must contains only one element');\r\n\t}\r\n\tif (rootElement instanceof Element) {\r\n\t\tif (!needKeepContent) {\r\n\t\t\trootElement.innerHTML = '';\r\n\t\t}\r\n\t\tif (template.children.length) {\r\n\t\t\trootElement.insertAdjacentElement('beforeEnd', template.children[0]);\r\n\t\t}\r\n\t}\r\n\treturn template.children[0];\r\n}\r\n\r\nfunction getTemplate (htmlString) {\r\n\tlet template;\r\n\tif (templates.has(htmlString)) {\r\n\t\ttemplate = templates.get(htmlString);\r\n\t} else {\r\n\t\ttemplate = createTemplate(htmlString);\r\n\t\ttemplates.set(htmlString, template);\r\n\t}\r\n\treturn template.cloneNode(true);\r\n}\r\n\r\nfunction replaceAnchors (node) {\r\n\tif (node instanceof Element) {\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\t[...node.childNodes].forEach(node => replaceAnchors(node));\r\n\t\t}\r\n\t} else if (anchorsRegex.test(node.nodeValue)) {\r\n\t\tconst templateString = node.nodeValue.replace(anchorsRegex, match => `<!--${match}-->`);\r\n\t\tconst template = getTemplate(templateString);\r\n\t\t[...template.childNodes].forEach(childNode => {\r\n\t\t\tnode.parentNode.insertBefore(childNode, node);\r\n\t\t});\r\n\t\tnode.remove();\r\n\t}\r\n}\r\n\r\nfunction processNode (node, valuesMap) {\r\n\tif (node.hasChildNodes()) {\r\n\t\t[...node.childNodes].forEach(child => processNode(child, valuesMap));\r\n\t}\r\n\tif (node instanceof Element) {\r\n\t\tprocessAttributes(node, valuesMap);\r\n\t} else if (node instanceof Comment) {\r\n\t\tprocessComment(node, valuesMap);\r\n\t}\r\n}\r\n\r\nfunction processComment (commentNode, valuesMap) {\r\n\tconst key = commentNode.nodeValue;\r\n\tif (valuesMap.hasOwnProperty(key)) {\r\n\t\tconst value = valuesMap[key];\r\n\t\tswitch (classOf(value)) {\r\n\t\t\tcase 'Boolean':\r\n\t\t\tcase 'Number':\r\n\t\t\tcase 'String': {\r\n\t\t\t\tconst newElement = createTemplate(String(value), true);\r\n\t\t\t\tcommentNode.replaceWith(newElement.firstChild);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 'Array': {\r\n\t\t\t\tvalue.forEach(item => {\r\n\t\t\t\t\tif (isPack(item)) {\r\n\t\t\t\t\t\tcommentNode.parentNode.insertBefore(render(item), commentNode);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new TypeError('Only the packed elements can be in the arrays');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tif (isPack(value)) {\r\n\t\t\t\t\tcommentNode.parentNode.insertBefore(render(value), commentNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcommentNode.remove();\r\n\t}\r\n}\r\n\r\nfunction processAttributes (element, valuesMap) {\r\n\t[...element.attributes].forEach(({ name, value }) => {\r\n\t\tif (valuesMap.hasOwnProperty(value.trim())) {\r\n\t\t\telement.valuesMap = element.valuesMap || {};\r\n\t\t\tconst targetValue = valuesMap[value.trim()];\r\n\t\t\tswitch (classOf(targetValue)) {\r\n\t\t\t\tcase 'Number':\r\n\t\t\t\tcase 'String': {\r\n\t\t\t\t\telement.setAttribute(name, targetValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'Boolean': {\r\n\t\t\t\t\tif (targetValue) {\r\n\t\t\t\t\t\telement.setAttribute(name, '');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'Function': {\r\n\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\telement.addEventListener(name, targetValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tif (isPack(targetValue)) {\r\n\t\t\t\t\t\telement.setAttribute(name, render(targetValue).innerHTML);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.removeAttribute(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (valuesMap.hasOwnProperty(name.trim())) {\r\n\t\t\tconst targetValue = valuesMap[name.trim()];\r\n\t\t\telement.removeAttribute(name);\r\n\t\t\telement.setAttribute(targetValue, true);\r\n\t\t} else if (value.match(anchorsRegex)) {\r\n\t\t\tthrow new SyntaxError(`In \"${name}\" attribute: only one string or one expression must be in value`);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction createTemplate (htmlString, asText) {\r\n\thtmlString = String(htmlString || '').trim();\r\n\tconst templateElement = document.createElement('div');\r\n\tif (asText) {\r\n\t\ttemplateElement.insertAdjacentText('afterBegin', htmlString);\r\n\t} else {\r\n\t\ttemplateElement.insertAdjacentHTML('afterBegin', htmlString);\r\n\t}\r\n\treturn templateElement;\r\n}\r\n\r\nfunction isPack (value) {\r\n\tvalue = value || {};\r\n\tconst hasTemplate = classOf(value.htmlString) === 'String';\r\n\tconst hasMap = classOf(value.valuesMap) === 'Object';\r\n\treturn hasTemplate && hasMap;\r\n}\r\n","/**\r\n * Tag for template literals. Returns the packed element.\r\n * @param  {Array} strings String part of template literal.\r\n * @param  {...*} values Values part.\r\n * @return {Object} Packed element.\r\n */\r\nexport function pack (strings, ...values) {\r\n\tconst parts = [];\r\n\tconst valuesMap = {};\r\n\tfor (let i = 0; i < strings.length; i++) {\r\n\t\tparts.push(strings[i]);\r\n\t\tif (values.hasOwnProperty(i)) {\r\n\t\t\tconst anchor = getAnchor(valuesMap);\r\n\t\t\tvaluesMap[anchor] = values[i];\r\n\t\t\tparts.push(anchor);\r\n\t\t}\r\n\t}\r\n\tconst htmlString = parts.join('').trim();\r\n\treturn { htmlString, valuesMap };\r\n}\r\n\r\nfunction getAnchor (valuesMap) {\r\n\tconst length = Object.keys(valuesMap).length;\r\n\tconst anchor = `{%${length}%}`;\r\n\treturn anchor;\r\n}\r\n","import { render } from 'packmar';\r\nimport App from './components/App';\r\n\r\nconst FILTERS = [\r\n\t{ name: 'All', check: note => true },\r\n\t{ name: 'Active', check: note => !note.checked },\r\n\t{ name: 'Completed', check: note => note.checked },\r\n];\r\n\r\nconst pressedKeys = {};\r\n\r\nlet state = {\r\n\tcurrentFilterName: FILTERS[0].name,\r\n\tcurrentText: '',\r\n\tnotes: [],\r\n};\r\n\r\nwindow.addEventListener('DOMContentLoaded', initialize);\r\n\r\nfunction initialize () {\r\n\tconst initialState = JSON.parse(localStorage.getItem('state'));\r\n\tstate = { ...state, ...initialState };\r\n\trenderApp();\r\n\tfocusOnField();\r\n\twindow.addEventListener('beforeunload', saveToLocalStorage);\r\n\twindow.addEventListener('keydown', onKeyDown);\r\n\twindow.addEventListener('keyup', onKeyUp);\r\n}\r\n\r\nfunction onKeyDown ({ key }) {\r\n\tpressedKeys[key] = true;\r\n\tconst isPrintable = key.length === 1;\r\n\tconst isKeysCombination = Object.keys(pressedKeys).length > 1;\r\n\tif (isPrintable && !isKeysCombination) {\r\n\t\tfocusOnField();\r\n\t}\r\n}\r\n\r\nfunction onKeyUp ({ key }) {\r\n\tdelete pressedKeys[key];\r\n}\r\n\r\nfunction saveToLocalStorage () {\r\n\tlocalStorage.setItem('state', JSON.stringify(state));\r\n}\r\n\r\nfunction typeNote ({ target }) {\r\n\tstate.currentText = target.value;\r\n}\r\n\r\nfunction addNote () {\r\n\tconst hasText = state.currentText.replace(/\\s*/g, '').length;\r\n\tif (hasText) {\r\n\t\tstate.notes.unshift({\r\n\t\t\tid: Math.random().toString(16).slice(2),\r\n\t\t\ttext: state.currentText.trim(),\r\n\t\t\tchecked: false,\r\n\t\t});\r\n\t\tstate.currentText = '';\r\n\t\trenderApp();\r\n\t} else {\r\n\t\tfocusOnField();\r\n\t}\r\n}\r\n\r\nfunction focusOnField () {\r\n\tconst field = document.querySelector('.main-field');\r\n\tif (field) {\r\n\t\tfield.focus();\r\n\t}\r\n}\r\n\r\nfunction checkNote (noteId) {\r\n\tconst targetNote = state.notes.find(note => note.id === noteId);\r\n\ttargetNote.checked = !targetNote.checked;\r\n\trenderApp();\r\n}\r\n\r\nfunction removeNote (noteId) {\r\n\tstate.notes = state.notes.filter(note => note.id !== noteId);\r\n\tif (state.notes.length === 0) {\r\n\t\tselectFilter(FILTERS[0].name);\r\n\t} else {\r\n\t\trenderApp();\r\n\t}\r\n}\r\n\r\nfunction selectFilter (filterName) {\r\n\tstate.currentFilterName = filterName;\r\n\trenderApp();\r\n}\r\n\r\nfunction renderApp () {\r\n\tconst app = App({\r\n\t\ttitle: '📝 To Do App',\r\n\t\tcurrentText: state.currentText,\r\n\t\tcurrentFilterName: state.currentFilterName,\r\n\t\tnotes: state.notes,\r\n\t\tfilters: FILTERS,\r\n\t\ttypeNote,\r\n\t\taddNote,\r\n\t\tcheckNote,\r\n\t\tremoveNote,\r\n\t\tselectFilter,\r\n\t});\r\n\trender(app, document.body);\r\n}\r\n"],"sourceRoot":""}